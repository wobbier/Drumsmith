(function(){"use strict";var t={3428:function(t,e,n){var i=n(5130),r=n(6768),l=n(4232);const a=(0,r.Lk)("div",{id:"header",class:"header"},[(0,r.Lk)("button",{class:"filter-button",onclick:"LoadScene('Assets/MainMenu.lvl')"},[(0,r.Lk)("img",{src:"img/Esc_Key_Light.png",alt:"Icon"}),(0,r.Lk)("span",null,"Main Menu")]),(0,r.Lk)("button",{class:"filter-button",onclick:"ToggleTrackListVisibility()"},[(0,r.Lk)("span",null,"View Track List")])],-1),s={id:"sidebar",class:"sidebar"},o={id:"trackPanel",class:"content"},c={id:"trackDetails"},u={id:"myDivContainer",class:"main-content"},d={class:"dynamic-div BoldRegular Large"},k=(0,r.Lk)("div",{class:"clearfix"},null,-1),f=["onMouseenter"],m=["onClick"],y={key:0,class:"album-art",src:"file:///{{track.AlbumArt}}"},T=["src"],p={class:"album-title"},h={class:"BoldRegular Large"},v={class:"Regular Small"},L={class:"note-count"},g=["onClick"],b=["onClick"],C=(0,r.Lk)("div",{class:"clearfix"},null,-1),A=(0,r.Lk)("div",{id:"filterMenu",class:"flyout right"},[(0,r.Lk)("p",{class:"hover-underline-animation",onclick:"closeFlyout('filterMenu');"}," < Back "),(0,r.Lk)("br"),(0,r.Lk)("h1",null,"Sort"),(0,r.Lk)("br"),(0,r.Lk)("p",{class:"menu-text flyout-select",onclick:"FilterSortTracks(0); closeFlyout('filterMenu');"}," Default "),(0,r.Lk)("p",{class:"menu-text flyout-select",onclick:"FilterSortTracks(1); closeFlyout('filterMenu');"}," Title "),(0,r.Lk)("p",{class:"menu-text flyout-select",onclick:"FilterSortTracks(2); closeFlyout('filterMenu');"}," Artist "),(0,r.Lk)("p",{class:"menu-text flyout-select",onclick:"FilterSortTracks(3); closeFlyout('filterMenu');"}," Year "),(0,r.Lk)("br"),(0,r.Lk)("h1",null,"Filter"),(0,r.Lk)("br"),(0,r.Lk)("div",{id:"TrackFilters"},[(0,r.Lk)("p",{class:"menu-text flyout-select",onclick:"FilterTracks(0); closeFlyout('filterMenu');"}," None "),(0,r.Lk)("br")])],-1),D=(0,r.Lk)("div",{class:"footer"},[(0,r.Lk)("button",{class:"openButton filter-button",onclick:"openFlyout('filterMenu')"},[(0,r.Lk)("img",{class:"openButton",src:"img/Tab_Key_Light.png",alt:"Icon"}),(0,r.Lk)("span",{class:"openButton"},"Sorting (Ascending)")])],-1);function x(t,e,n,i,x,S){const E=(0,r.g2)("DetailsPanel"),I=(0,r.g2)("TrackRadio");return(0,r.uX)(),(0,r.CE)(r.FK,null,[a,(0,r.Lk)("div",s,[(0,r.Lk)("div",o,[(0,r.Lk)("div",c,[null!=this.focusedTrack?((0,r.uX)(),(0,r.Wv)(E,{key:0,track:this.focusedTrack},null,8,["track"])):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(S.sortedSections,((e,n)=>((0,r.uX)(),(0,r.CE)("div",{key:n,class:"section"},[(0,r.Lk)("div",d,(0,l.v_)(e.header),1),k,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,((e,n)=>((0,r.uX)(),(0,r.CE)("div",{key:n,class:"dynamic-div",onMouseenter:()=>S.DelayedTrackPreview(e)},[(0,r.Lk)("div",{class:"dynamic-div",onClick:()=>S.SelectTrackToPlay(e.Title,n)},[e?.FolderPath?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("img",y)),e?.FolderPath?((0,r.uX)(),(0,r.CE)("img",{key:1,class:"album-art",src:`http://${this.TryGetDLCURL()}/${e.FolderPath}/${e.AlbumArtFileName}`},null,8,T)):(0,r.Q3)("",!0)],8,m),(0,r.Lk)("div",p,[(0,r.Lk)("h1",h,(0,l.v_)(e.Title),1),(0,r.Lk)("h2",v,(0,l.v_)(e.Artist),1),(0,r.Lk)("h3",null,(0,l.v_)(e.Year),1)]),(0,r.Lk)("div",L,"Note Count: "+(0,l.v_)(e.NoteCount),1),S.TryAreToolsEnabled()?((0,r.uX)(),(0,r.CE)("div",{key:0,onClick:()=>t.EditTrack(e.TrackName)},"DEV TOOLS ENABLED",8,g)):(0,r.Q3)("",!0),e?.FolderPath?((0,r.uX)(),(0,r.CE)("div",{key:1,onClick:()=>S.TryDownloadDLC(e)},"DOWNLOAD TRACK",8,b)):(0,r.Q3)("",!0),C],40,f)))),128))])))),128))]),A,D,(0,r.bF)(I)],64)}n(4114);const S={class:"album-art"},E={key:0,class:"album-art",src:"file:///{{track.AlbumArt}}"},I=["src"],F={class:"dynamic-div"},w={class:"album-title"},P={class:"note-count"},_=(0,r.Lk)("div",{class:"clearfix"},null,-1);function $(t,e,n,i,a,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",S,[n.track?.FolderPath?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("img",E)),n.track?.FolderPath?((0,r.uX)(),(0,r.CE)("img",{key:1,class:"album-art",src:`http://${n.track.DLCURL}/${n.track.FolderPath}/${n.track.AlbumArtFileName}`},null,8,I)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",F,[(0,r.Lk)("div",w,[(0,r.Lk)("h1",null,(0,l.v_)(n.track.Title),1),(0,r.Lk)("h2",null,(0,l.v_)(n.track.Artist),1),(0,r.Lk)("h3",null,(0,l.v_)(n.track.Album),1),(0,r.Lk)("h3",null,(0,l.v_)(n.track.Genre),1),(0,r.Lk)("h3",null,(0,l.v_)(n.track.Year),1)]),(0,r.Lk)("div",P,"Note Count: "+(0,l.v_)(n.track.NoteCount),1),_]),(0,r.Lk)("div",{class:"dynamic-div",onClick:e[0]||(e[0]=t=>s.viewTrackStats(n.track.Title))}," View Stats ")],64)}var M={props:{track:{type:Object,required:!0}},methods:{selectTrackToPlay(t){console.log("Track selected:",t)},toggleTrackListVisibility(){console.log("Toggled track list visibility")},viewTrackStats(t){console.log("Viewing stats for track:",t)}}},B=n(1241);const N=(0,B.A)(M,[["render",$]]);var R=N;const U=t=>((0,r.Qi)("data-v-3384fd46"),t=t(),(0,r.jt)(),t),X=["onmouseover"],O=["onmouseover"],G=U((()=>(0,r.Lk)("div",{class:"track-art"},[(0,r.Lk)("img",{id:"track-art"})],-1))),j={class:"track-details"},V=U((()=>(0,r.Lk)("div",{class:"clearfix"},null,-1))),W=U((()=>(0,r.Lk)("div",{class:"clearfix"},null,-1))),K=U((()=>(0,r.Lk)("div",{class:"skip-track",onclick:"SkipTrack()"},[(0,r.Lk)("a",{href:"#"},"Skip")],-1))),Q={class:"track-progress"},q=["max"],H={class:"progress-labels"},Y=U((()=>(0,r.Lk)("span",null,"/",-1)));function J(t,e,n,a,s,o){const c=(0,r.g2)("ScrollingText");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",{id:"track-radio-hover",onmouseover:o.ShowTrackRadio},null,8,X),(0,r.Lk)("div",{id:"track-radio",class:(0,l.C4)({visible:s.isVisible}),onmouseover:o.ShowTrackRadio},[G,(0,r.Lk)("div",j,[(0,r.bF)(c,{baseId:"track-title",textStyle:"BoldRegular Large",text:s.trackTitle},null,8,["text"]),V,(0,r.bF)(c,{baseId:"track-artist",textStyle:"Regular Small",text:s.trackArtist},null,8,["text"]),W,K]),(0,r.Lk)("div",Q,[(0,r.bo)((0,r.Lk)("input",{type:"range",min:"0",max:s.duration,step:"1","onUpdate:modelValue":e[0]||(e[0]=t=>s.currentTime=t),onChange:e[1]||(e[1]=(...t)=>o.seekAudio&&o.seekAudio(...t))},null,40,q),[[i.Jo,s.currentTime]]),(0,r.Lk)("div",H,[(0,r.Lk)("span",null,(0,l.v_)(o.formatTime(s.currentTime)),1),Y,(0,r.Lk)("span",null,(0,l.v_)(o.formatTime(s.duration)),1)])])],10,O)],64)}const z=["id"],Z=["id"];function tt(t,e,n,i,a,s){return(0,r.uX)(),(0,r.CE)("div",{class:(0,l.C4)(["scroll-container",n.containerStyle]),id:s.containerId},[(0,r.Lk)("div",{class:(0,l.C4)(["scroll-content",n.textStyle]),id:s.textId},(0,l.v_)(n.text),11,Z)],10,z)}var et={props:{text:{type:String,default:"Scrollable Text"},baseId:{type:String,required:!0},containerStyle:{type:String,default:""},textStyle:{type:String,default:""}},data(){return{scrollingTextInstance:null}},computed:{containerId(){return`${this.baseId}-container`},textId(){return`${this.baseId}-text`}},mounted(){this.scrollingTextInstance=this.setupScrollingText(this.containerId,this.textId)},watch:{text(t,e){this.scrollingTextInstance.updateText(t)}},methods:{setupScrollingText(t,e){const n=document.getElementById(t),i=document.getElementById(e);let r,l=!0;function a(){return i.offsetWidth>n.offsetWidth}function s(){const t=i.offsetWidth,e=n.offsetWidth;return t/e*5}function o(){clearTimeout(r),i.style.transition="none",i.style.left="0",i.style.opacity="1"}function c(){if(o(),!l||!a())return;const t=s();r=setTimeout((()=>{i.style.transition=`left ${t}s linear`,i.style.left=`-${i.offsetWidth-n.offsetWidth}px`,r=setTimeout((()=>{i.style.transition="opacity 1s ease",i.style.opacity="0",r=setTimeout((()=>{i.style.transition="none",i.style.left="0",i.style.opacity="1",r=setTimeout((()=>{l&&(i.style.transition=`left ${t}s linear`,c())}),1e3)}),1e3)}),1e3*(t+1))}),1e3)}function u(t){l=!1,o(),i.textContent=t,setTimeout((()=>{l=!0,c()}),500)}function d(){l=!0,c()}function k(){l=!1,o()}return d(),{updateText:u,start:d,stop:k}},applyScrollFadeAnimation(t,e=1e3,n=5e3,i=2e3){const r=document.getElementById(t);function l(){const t=r.parentElement.offsetWidth,a=r.offsetWidth,s=a-t;setTimeout((()=>{r.style.transition=`transform ${n}ms linear`,r.style.transform=`translateX(-${s}px)`}),e),setTimeout((()=>{r.style.transition=`opacity ${i/2}ms linear`,r.style.opacity="0"}),n+e),setTimeout((()=>{r.style.transition="none",r.style.transform="translateX(0)",r.style.opacity="0",setTimeout((()=>{r.style.transition=`opacity ${i/2}ms linear`,r.style.opacity="1"}),100),setTimeout(l,i)}),n+e+i)}r&&l()}}};const nt=(0,B.A)(et,[["render",tt],["__scopeId","data-v-c1e36282"]]);var it=nt,rt={components:{ScrollingText:it},data(){return{trackTitle:"EXAMPLE TITLE",trackArtist:"EXAMPLE ARTIST",isVisible:!1,timer:null,currentTime:0,duration:0,updateIntervalId:null}},mounted(){if(window.DisplayTrack=this.DisplayTrack,"function"===typeof GetCurrentTrackDuration){var t=GetCurrentTrackDuration();this.duration=t/1e3}this.updateIntervalId=setInterval((()=>{if(0===this.duration&&"function"===typeof GetCurrentTrackDuration){var t=GetCurrentTrackDuration();this.duration=t/1e3}if("function"===typeof GetCurrentTrackPosition){t=GetCurrentTrackPosition();this.currentTime=t/1e3}}),1e3)},beforeUnmount(){clearTimeout(this.timer),clearInterval(this.updateIntervalId)},methods:{ShowTrackRadio(){clearTimeout(this.timer),this.isVisible||(this.isVisible=!0),this.timer=setTimeout((()=>{this.isVisible&&(this.isVisible=!1)}),15e3)},DisplayTrack(t){var e=document.getElementById("track-art");if(e.src=`file:///${t.AlbumArt}`,this.trackTitle=`${t.TrackName}`,this.trackArtist=`${t.ArtistName}`,"function"===typeof GetCurrentTrackDuration){var n=GetCurrentTrackDuration();this.duration=n/1e3}if("function"===typeof GetCurrentTrackPosition){n=GetCurrentTrackPosition();this.currentTime=n/1e3}this.ShowTrackRadio()},seekAudio(){if("function"===typeof SeekToPosition){const t=this.currentTime/this.duration;SeekToPosition(t)}},formatTime(t){if(!t)return"0:00";const e=Math.floor(t/60),n=Math.floor(t%60).toString().padStart(2,"0");return`${e}:${n}`}}};const lt=(0,B.A)(rt,[["render",J],["__scopeId","data-v-3384fd46"]]);var at,st=lt,ot={name:"DLC",components:{DetailsPanel:R,TrackRadio:st},data(){return{tracks:[],sortBy:"Title",dlcIndex:[],focusedTrack:null}},mounted(){this.fetchDlcIndex(),window.UpdateDetailsPanel=this.UpdateDetailsPanel},computed:{sortedSections(){const t=this.tracks.reduce(((t,e)=>{let n;if("Artist"===this.sortBy){const t=e.Artist?e.Artist.trim():"Unknown";n=t[0]?.toUpperCase()||"Unknown"}else if("Title"===this.sortBy){const t=e.Title?e.Title.trim():"Unknown";n=t[0]?.toUpperCase()||"Unknown"}else n=e[this.sortBy]||"Unknown";return t[n]||(t[n]=[]),t[n].push(e),t}),{});return Object.keys(t).sort().map((e=>({header:e,items:t[e].sort(((t,e)=>"Artist"===this.sortBy?t.Artist.localeCompare(e.Artist):t[this.sortBy]?.toString().localeCompare(e[this.sortBy]?.toString()||"")))})))}},methods:{async fetchDlcIndex(){try{const t=await fetch("https://"+this.TryGetDLCURL()+"/dlc_index.json");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.dlcIndex=await t.json(),this.dlcIndex.forEach((t=>{t.AlbumArtFileName||(t.AlbumArtFileName="Album.png"),this.AddTrack(t)}))}catch(t){console.error("Error fetching DLC index:",t)}},TryGetDLCURL(){return"function"===typeof GetDLCURL?GetDLCURL():"dlc.mitch.gg"},TryDownloadDLC(t){"function"===typeof DownloadDLC&&DownloadDLC(JSON.stringify(t))},RequestDetailsPanelUpdate2(t){if("function"===typeof RequestDetailsPanelUpdate)return RequestDetailsPanelUpdate(t)},SelectTrackToPlay(t,e){console.log(`SelectTrackToPlay called with Title: ${t}, Index: ${e}`)},DelayedTrackPreview(t){clearTimeout(at),this.focusedTrack=t,this.focusedTrack.DLCURL=this.TryGetDLCURL(),console.log(t)},ClearTrackList(){const t=document.getElementById("myDivContainer"),e=t.querySelectorAll(".dynamic-div");e.forEach((t=>t.remove()))},ToggleTrackListVisibility(){var t=document.getElementById("sidebar"),e=document.getElementById("background"),n=document.getElementById("main-body");"none"===t.style.display?t.style.display="flex":t.style.display="none","none"===e.style.display?e.style.display="block":e.style.display="none","none"===n.style.display?n.style.display="block":n.style.display="none"},TryAreToolsEnabled(){return"function"===typeof AreToolsEnabled&&AreToolsEnabled()},AddTrack(t){this.tracks.push(t)},UpdateDetailsPanel(t){},fillDivs(){const t=[{TrackName:"Data 1",ArtistName:"Data 1",AlbumArt:"../DLC/ExampleSong/this_suffering_cover.jpg"},{TrackName:"Data 2",ArtistName:"Data 2",AlbumArt:"file:///M:/Projects/ME/Drumsmith/Assets/DLC/ExampleSong2/album.jpg"},{TrackName:"Data 3",ArtistName:"Data 3",AlbumArt:"image3.jpg"},{TrackName:"Data 4",ArtistName:"Data 4",AlbumArt:"image4.jpg"}];t.forEach((t=>{this.AddTrack(t)}))},SetFilters(t){const e=document.getElementById("TrackFilters");e.innerHTML="",t.forEach((t=>{e.innerHTML+=`<p\n    class="menu-text flyout-select"\n    onclick="FilterTracks(${t.FilterID}); closeFlyout('filterMenu');"\n  >\n  ${t.FilterName} (${t.Count})\n  </p>`})),e.innerHTML+="\n  <br />\n  <br />"}}};const ct=(0,B.A)(ot,[["render",x]]);var ut=ct;(0,i.Ef)(ut).mount("#app")}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var l=e[i]={exports:{}};return t[i].call(l.exports,l,l.exports,n),l.exports}n.m=t,function(){var t=[];n.O=function(e,i,r,l){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],r=t[u][1],l=t[u][2];for(var s=!0,o=0;o<i.length;o++)(!1&l||a>=l)&&Object.keys(n.O).every((function(t){return n.O[t](i[o])}))?i.splice(o--,1):(s=!1,l<a&&(a=l));if(s){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}l=l||0;for(var u=t.length;u>0&&t[u-1][2]>l;u--)t[u]=t[u-1];t[u]=[i,r,l]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={686:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var r,l,a=i[0],s=i[1],o=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(o)var u=o(n)}for(e&&e(i);c<a.length;c++)l=a[c],n.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return n.O(u)},i=self["webpackChunkui"]=self["webpackChunkui"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(3428)}));i=n.O(i)})();
//# sourceMappingURL=DLC.js.map